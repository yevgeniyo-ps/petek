import{j as e}from"./md-editor-C1q9TcpX.js";import{u as k,d as L,r as i}from"./react-vendor-tRUzE08Q.js";import{u as P,a as E,P as _}from"./index-BFU_njf7.js";import{N as p,A as z,a as I}from"./NoteEditor-mGwv49CY.js";import{S as O}from"./ConfirmDialog-CjtMJDw2.js";import"./supabase-BZ0N5lZN.js";import"./chevron-down-B4Rhi2K0.js";function R(){const{notes:a,loading:f,createNote:N,updateNote:g}=P(),{getNoteIdsForLabel:m}=E(),v=k(),[j]=L(),[b,l]=i.useState(!1),[c,n]=i.useState(null),[o,w]=i.useState(""),d=j.get("tag"),x=i.useMemo(()=>{let t=a.filter(s=>!s.is_archived);if(d){const s=m(d);t=t.filter(r=>s.includes(r.id))}if(o){const s=o.toLowerCase();t=t.filter(r=>r.title.toLowerCase().includes(s)||r.content.toLowerCase().includes(s))}return t},[a,o,d,m]),h=x.filter(t=>t.is_pinned),C=x.filter(t=>!t.is_pinned),y=async t=>{c?await g(c.id,t):await N(t),n(null)},u=t=>{n(t),l(!0)},S=()=>{n(null),l(!0)};return f?e.jsx("div",{className:"text-[#7a7890] text-[14px] text-center pt-40",children:"Loading notes..."}):e.jsxs("div",{className:"max-w-[1200px] px-12 py-10",children:[e.jsxs("div",{className:"mb-1",children:[e.jsx("h1",{className:"text-[26px] font-bold text-white leading-tight",children:"Notes"}),e.jsx("p",{className:"text-[14px] text-[#7a7890] mt-1",children:"Create and manage your markdown notes"})]}),e.jsx("div",{className:"flex items-center justify-between mt-8 mb-8",children:e.jsxs("div",{className:"relative",children:[e.jsx(O,{size:14,className:"absolute left-4 top-1/2 -translate-y-1/2 text-[#7a7890]"}),e.jsx("input",{type:"text",placeholder:"Search notes...",value:o,onChange:t=>w(t.target.value),className:"pl-10 pr-5 py-2 bg-transparent border border-[#1c1928] rounded-full text-[13px] text-[#e0dfe4] placeholder-[#4a4660] outline-none focus:border-[#2d2a40] transition-colors w-72"})]})}),x.length===0?e.jsx("div",{className:"rounded-xl border border-[#1c1928] bg-[#0f0d18] py-24 text-center",children:e.jsx("p",{className:"text-[14px] text-[#7a7890]",children:o?"No notes found matching your criteria.":"No notes yet. Create one to get started."})}):e.jsxs(e.Fragment,{children:[e.jsx(p,{notes:h,onNoteClick:u,sectionTitle:h.length>0?"Pinned":void 0}),e.jsx(p,{notes:C,onNoteClick:u,sectionTitle:h.length>0?"Others":void 0})]}),a.some(t=>t.is_archived)&&e.jsxs("button",{onClick:()=>v("/archive"),className:"mt-10 mx-auto flex items-center gap-2 text-[13px] text-[#7a7890] hover:text-[#b0adc0] transition-colors",children:[e.jsx(z,{size:14}),e.jsxs("span",{children:[a.filter(t=>t.is_archived).length," archived notes"]})]}),e.jsx(I,{note:c,open:b,onClose:()=>{l(!1),n(null)},onSave:y}),e.jsx("button",{onClick:S,className:"fixed bottom-8 right-8 w-14 h-14 rounded-full bg-[#ec4899] hover:bg-[#db2777] text-white shadow-lg shadow-[#ec4899]/25 hover:shadow-[#ec4899]/40 transition-all flex items-center justify-center z-30",title:"New Note",children:e.jsx(_,{size:24,strokeWidth:2.5})})]})}export{R as default};
